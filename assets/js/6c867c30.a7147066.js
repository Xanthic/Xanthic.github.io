"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[223],{6360:(e,a,i)=>{i.r(a),i.d(a,{assets:()=>h,contentTitle:()=>o,default:()=>m,frontMatter:()=>r,metadata:()=>d,toc:()=>l});var n=i(4848),c=i(8453),t=(i(1470),i(9365),i(2306)),s=i(9310);const r={},o="Jackson",d={id:"integration/jackson",title:"Jackson",description:"added in: Xanthic v0.5.0",source:"@site/versioned_docs/version-0.x/integration/jackson.mdx",sourceDirName:"integration",slug:"/integration/jackson",permalink:"/integration/jackson",draft:!1,unlisted:!1,editUrl:"https://github.com/Xanthic/Xanthic.github.io/tree/main/docs/versioned_docs/version-0.x/integration/jackson.mdx",tags:[],version:"0.x",lastUpdatedBy:"iProdigy",lastUpdatedAt:1700973626e3,frontMatter:{},sidebar:"version-1.x-docs",previous:{title:"Integrations",permalink:"/category/integrations"},next:{title:"Spring",permalink:"/integration/spring"}},h={},l=[{value:"Description",id:"description",level:2},{value:"Installation",id:"installation",level:2},{value:"Usage",id:"usage",level:2},{value:"Defaults",id:"defaults",level:3},{value:"Custom",id:"custom",level:3}];function p(e){const a={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.h1,{id:"jackson",children:"Jackson"}),"\n",(0,n.jsxs)(a.blockquote,{children:["\n",(0,n.jsx)(a.p,{children:"added in: Xanthic v0.5.0"}),"\n"]}),"\n",(0,n.jsxs)(a.blockquote,{children:["\n",(0,n.jsx)(a.p,{children:"requires: Jackson v2.16+"}),"\n"]}),"\n",(0,n.jsx)(a.h2,{id:"description",children:"Description"}),"\n",(0,n.jsxs)(a.p,{children:["Jackson relies upon ",(0,n.jsx)(a.a,{href:"https://javadoc.io/static/com.fasterxml.jackson.core/jackson-databind/2.16.0/com/fasterxml/jackson/databind/cfg/CacheProvider.html",children:"caching"})," during ",(0,n.jsx)(a.a,{href:"https://javadoc.io/static/com.fasterxml.jackson.core/jackson-databind/2.16.0/com/fasterxml/jackson/databind/ser/SerializerCache.html",children:"serialization"}),", ",(0,n.jsx)(a.a,{href:"https://javadoc.io/static/com.fasterxml.jackson.core/jackson-databind/2.16.0/com/fasterxml/jackson/databind/deser/DeserializerCache.html",children:"deserialization"}),", and ",(0,n.jsx)(a.a,{href:"https://javadoc.io/static/com.fasterxml.jackson.core/jackson-databind/2.16.0/com/fasterxml/jackson/databind/type/TypeFactory.html",children:"type resolution"}),"."]}),"\n",(0,n.jsxs)(a.p,{children:["By default, Jackson relies upon ",(0,n.jsx)(a.a,{href:"https://github.com/FasterXML/jackson-databind/blob/2.16/src/main/java/com/fasterxml/jackson/databind/util/LRUMap.java",children:(0,n.jsx)(a.code,{children:"LRUMap"})}),",\nwhich utilizes a ",(0,n.jsx)(a.a,{href:"https://github.com/FasterXML/jackson-databind/blob/2.16/src/main/java/com/fasterxml/jackson/databind/util/internal/PrivateMaxEntriesMap.java",children:"modified"})," ",(0,n.jsx)(a.a,{href:"https://github.com/ben-manes/concurrentlinkedhashmap",children:(0,n.jsx)(a.code,{children:"ConcurrentLinkedHashMap"})})," (CLHM) implementation.\nCLHM has not been updated in nearly a decade, and its author suggests alternatives such as ",(0,n.jsx)(a.a,{href:"/provider/caffeine3",children:"Caffeine"}),"."]}),"\n",(0,n.jsxs)(a.p,{children:["This module allows you to easily delegate Jackson's caching to your ",(0,n.jsx)(a.a,{href:"/provider/",children:"preferred Xanthic cache implementation"}),"."]}),"\n",(0,n.jsx)(a.h2,{id:"installation",children:"Installation"}),"\n",(0,n.jsx)(s.JavaDependency,{group:"io.github.xanthic.cache",name:"cache-jackson",scope:"implementation"}),"\n",(0,n.jsxs)(t.A,{severity:"info",variant:"outlined",children:["Versions are managed by the ",(0,n.jsx)("a",{href:"/getting-started/installation",children:"xanthic-bom"}),"!"]}),"\n",(0,n.jsx)(a.h2,{id:"usage",children:"Usage"}),"\n",(0,n.jsxs)(a.p,{children:["When building a Jackson Mapper, simply specify ",(0,n.jsx)(a.a,{href:"https://javadoc.io/static/com.fasterxml.jackson.core/jackson-databind/2.16.0/com/fasterxml/jackson/databind/cfg/MapperBuilder.html#cacheProvider-com.fasterxml.jackson.databind.cfg.CacheProvider-",children:(0,n.jsx)(a.code,{children:"cacheProvider"})})," with an instance of ",(0,n.jsx)(a.a,{href:"https://javadoc.io/doc/io.github.xanthic.cache/cache-jackson/latest/io/github/xanthic/jackson/XanthicJacksonCacheProvider.html",children:(0,n.jsx)(a.code,{children:"XanthicJacksonCacheProvider"})}),"."]}),"\n",(0,n.jsxs)(a.p,{children:["In addition, you must have a ",(0,n.jsx)(a.a,{href:"/provider/",children:"backing cache implementation"})," on your classpath for Xanthic to utilize."]}),"\n",(0,n.jsx)(a.h3,{id:"defaults",children:"Defaults"}),"\n",(0,n.jsxs)(a.p,{children:[(0,n.jsxs)(a.a,{href:"https://javadoc.io/static/io.github.xanthic.cache/cache-jackson/0.5.0/io/github/xanthic/jackson/XanthicJacksonCacheProvider.html#defaultInstance()",children:[(0,n.jsx)(a.code,{children:"XanthicJacksonCacheProvider"}),"'s default instance"]})," uses the recommended maximum cache sizes defined by Jackson developers:"]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-java",children:"ObjectMapper mapper = JsonMapper.builder()\n    .cacheProvider(XanthicJacksonCacheProvider.defaultInstance())\n    .build();\n"})}),"\n",(0,n.jsxs)(a.p,{children:["Here, Xanthic will use the ",(0,n.jsx)(a.a,{href:"/#default-cache-provider",children:"default cache provider"}),"\nstored within ",(0,n.jsx)(a.a,{href:"https://javadoc.io/doc/io.github.xanthic.cache/cache-core/latest/io/github/xanthic/cache/core/CacheApiSettings.html",children:(0,n.jsx)(a.code,{children:"CacheApiSettings"})}),"."]}),"\n",(0,n.jsx)(a.h3,{id:"custom",children:"Custom"}),"\n",(0,n.jsx)(a.p,{children:"Alternatively, you can customize the cache specifications used for the deserializer cache, serializer cache, and type factory."}),"\n",(0,n.jsx)(a.p,{children:"In the simplest case, this customization can take the form of different maximum cache sizes:"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-java",children:"long deserCapacity = 2048;\nlong serCapacity = 4096;\nlong typesCapacity = 256;\n\nObjectMapper mapper = JsonMapper.builder()\n    .cacheProvider(new XanthicJacksonCacheProvider(deserCapacity, serCapacity, typesCapacity))\n    .build();\n"})}),"\n",(0,n.jsx)(a.p,{children:"\xa0"}),"\n",(0,n.jsxs)(a.p,{children:["Alternatively, your customization can involve more complex adjustments like entry expiry and removal listeners.\nTheoretically, you could even mix-and-match different backing implementations via ",(0,n.jsx)(a.a,{href:"https://javadoc.io/doc/io.github.xanthic.cache/cache-core/latest/io/github/xanthic/cache/core/CacheApiSpec.html",children:(0,n.jsx)(a.code,{children:"spec.provider"})}),"."]}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-java",children:"CacheProvider provider = new XanthicJacksonCacheProvider(\n    // for deserialization\n    spec -> spec.maxSize(2048L)\n        .expiryType(ExpiryType.POST_ACCESS)\n        .expiryTime(Duration.ofMinutes(4)),\n    // for serialization\n    spec -> spec.maxSize(4096L)\n        .expiryType(ExpiryType.POST_WRITE)\n        .expiryTime(Duration.ofMinutes(5)),\n    // for type factory\n    spec -> spec.maxSize(256L)\n        .removalListener((key, value, cause) -> {})\n);\n\nObjectMapper mapper = JsonMapper.builder()\n    .cacheProvider(provider)\n    .build();\n"})}),"\n",(0,n.jsx)(t.A,{severity:"info",variant:"outlined",children:"This example is simply included for illustration purposes (and may not be optimally parameterized for your use case)."})]})}function m(e={}){const{wrapper:a}={...(0,c.R)(),...e.components};return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(p,{...e})}):p(e)}}}]);